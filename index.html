<h1>JS13KGAMES statistics</h1>

<script type="module">
  import * as Plot from 'https://cdn.skypack.dev/@observablehq/plot';
  import * as Utils from './utils.js';
  import { counts } from './data/processed/counts.js';

  // remove days where no entry was submitted
  let data = counts.filter(d => d.count > 0)

  Utils.insertH2("Daily entry submission (all years)");
  document.body.appendChild(
    Plot.plot({
      height: 800,
      width: 1600,
      // indicate which color represents which year
      color: {
        legend: true,
        scheme: "spectral"
      },
      // don't render year labels on the x-axis
      x: {
        axis: null
      },
      y: {
        grid: true,
        label: "# of entries"
      },
      // group year of submission on the x axis, grouped per day
      facet: {
        data,
        x: "day"
      },
      marks: [
        // render a horizontal line for 0 count
        Plot.ruleY([0]),
        // render year of submission on x axis, # of entries on y axis
        // with a different color per year
        Plot.barY(data, { x: "year", y: "count", fill: "year" })
      ]
    })
  );

  Utils.insertH2("Daily entry submission (per year)");
  document.body.appendChild(
    Plot.plot({
      height: 6400,
      width: 1600,
      // indicate which color represents which year
      color: {
        legend: true,
        scheme: "spectral"
      },
      x: {
        nice: true
      },
      y: {
        grid: true,
        label: "# of entries"
      },
      // separate each year as a different graph,
      // stacked vertically one below the other
      facet: {
        data,
        y: "year"
      },
      marks: [
        // render a horizontal line for 0 count
        Plot.ruleY([0]),
        // renders day of submission on x axis, # of entries on y axis
        // with a different color per year
        Plot.barY(data, { x: "day", y: "count", fill: "year" })
      ]
    })
  );
</script>
